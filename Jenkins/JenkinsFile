properties([ 
	parameters([
	booleanParam(name: 'Refresh', defaultValue: false, description: 'Read Jenkinsfile and exit.'),
	string(name: 'Jenkins',description:'Keep this checked if you want to run this project Jenkins file' ),
	booleanParam(name:'Login',defaultValue:false, description:'select login feature to run'),
	booleanParam(name:'Application',defaultValue:false, description:'select Application feature to run'),
	booleanParam(name:'TearDown',defaultValue:false, description:'select TearDown feature to run'),
	booleanParam(name:'AddTemplate',defaultValue:false, description:'select AddTemplate feature to run'),
	])
 ])
 
 def Fee=[ 
 Login: params.Login,
 Application: params.Application,
 TearDown: params.TearDown,
 AddTemplate : params.AddTemplate
  ]

pipeline{ 

    agent any    
        stages{ 
          stage('Read Jenkinsfile') {
            when {
                expression {
                    return params.Refresh == true
                }
            }
            steps {
                echo "Jenkinsfile reloaded successfully and Exiting early"
            }
        }          
            stage('FrameworkSample'){                  
                    steps{
                  		  script{
                          if(params.Login){
                        echo 'Run the login method'
                    }
                    else {
                        echo 'Run the Application method'
                    }   
                    }   
                      echo 'Hello world'
                        echo "Hello ${params.Jenkins}" 
                        echo "You have selected ${params.Feature}"
                    }
                }
                stage('Execute the Feature'){
						steps{
						    script{
						        Fee.each{
						            entity->stage(entity.key){
						                if(entity.value){
						                echo "${entity.value}"
						                    catchError{
						                        echo 'might fail'
						                    }

						                }
						            }
						        }
						    }
						} 
                }
            }            
        
        post{
            always{
                echo 'Say Hello again'
            }
        }
}
